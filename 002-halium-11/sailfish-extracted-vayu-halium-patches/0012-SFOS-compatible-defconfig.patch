From 264061ebb0335885b96b0090509088fcf3048c5f Mon Sep 17 00:00:00 2001
From: Verevka <verevka86@gmail.com>
Date: Fri, 14 Jan 2022 22:34:58 +0300
Subject: [PATCH 12/35] SFOS compatible defconfig

---
 arch/arm64/configs/vayu_user_defconfig | 94 ++++++++++++++++++++++++--
 1 file changed, 88 insertions(+), 6 deletions(-)

diff --git a/arch/arm64/configs/vayu_user_defconfig b/arch/arm64/configs/vayu_user_defconfig
index 3e521a3dc60d..83f3fa5fd3eb 100644
--- a/arch/arm64/configs/vayu_user_defconfig
+++ b/arch/arm64/configs/vayu_user_defconfig
@@ -1,7 +1,7 @@
 CONFIG_HOTPLUG_SIZE_BITS=29
-CONFIG_LOCALVERSION="-Arrow"
+CONFIG_LOCALVERSION="-hybris"
 # CONFIG_LOCALVERSION_AUTO is not set
-# CONFIG_FHANDLE is not set
+CONFIG_FHANDLE=y
 CONFIG_AUDIT=y
 # CONFIG_AUDITSYSCALL is not set
 CONFIG_NO_HZ=y
@@ -30,9 +30,8 @@ CONFIG_CGROUP_CPUACCT=y
 CONFIG_CGROUP_BPF=y
 CONFIG_SCHED_CORE_CTL=y
 CONFIG_NAMESPACES=y
-# CONFIG_PID_NS is not set
 CONFIG_SCHED_AUTOGROUP=y
-CONFIG_SCHED_TUNE=y
+CONFIG_SCHED_TUNE=n
 CONFIG_DEFAULT_USE_ENERGY_AWARE=y
 CONFIG_BLK_DEV_INITRD=y
 # CONFIG_RD_XZ is not set
@@ -308,7 +307,7 @@ CONFIG_DM_VERITY_FEC=y
 CONFIG_DM_BOW=y
 CONFIG_NETDEVICES=y
 CONFIG_BONDING=y
-CONFIG_DUMMY=y
+CONFIG_DUMMY=n
 CONFIG_TUN=y
 CONFIG_VETH=y
 CONFIG_SKY2=y
@@ -353,7 +352,6 @@ CONFIG_TOUCHSCREEN_NT36xxx_HOSTDL_SPI=y
 CONFIG_TOUCHSCREEN_NVT_DEBUG_FS=y
 CONFIG_TOUCHSCREEN_TDDI_DBCLK=y
 # CONFIG_SERIO_SERPORT is not set
-# CONFIG_VT is not set
 # CONFIG_LEGACY_PTYS is not set
 # CONFIG_DEVMEM is not set
 CONFIG_SERIAL_MSM_GENI=y
@@ -782,3 +780,87 @@ CONFIG_FINGERPRINT_GOODIX_TA_VAYU=y
 CONFIG_COMBO_MODIFY_VAYU=y
 CONFIG_GPIO_TESTING_MODE=y
 CONFIG_SIMTRAY_STATUS=y
+
+# hybris Pie requires
+CONFIG_SECURITY_YAMA=y
+CONFIG_SECURITY_YAMA_STACKED=y
+CONFIG_FW_LOADER_USER_HELPER=y
+
+# hybris flags from Oreo
+CONFIG_AUTOFS4_FS=y
+CONFIG_BT_RFCOMM=y
+CONFIG_CGROUP_DEVICE=y
+CONFIG_CGROUP_PERF=y
+CONFIG_CHECKPOINT_RESTORE=y
+CONFIG_DEVTMPFS=y
+CONFIG_DEVTMPFS_MOUNT=y
+CONFIG_FANOTIFY=y
+CONFIG_IPC_NS=y
+CONFIG_LBDAF=y
+CONFIG_NETFILTER_NETLINK_ACCT=y
+CONFIG_NETFILTER_XT_MATCH_NFACCT=y
+CONFIG_NETFILTER_XT_MATCH_QTAGUID=y
+CONFIG_NETPRIO_CGROUP=y
+CONFIG_NET_CLS_CGROUP=y
+CONFIG_PID_NS=y
+CONFIG_RTC_DRV_CMOS=y
+CONFIG_SECURITY_SELINUX_BOOTPARAM=y
+CONFIG_SECURITY_SELINUX_BOOTPARAM_VALUE=1
+CONFIG_SYSVIPC=y
+CONFIG_UTS_NS=y
+CONFIG_VT=y
+CONFIG_WATCHDOG_NOWAYOUT=y
+
+CONFIG_PROC_DEVICETREE=y
+CONFIG_TMPFS_XATTR=y
+CONFIG_MEMCG_KMEM=y
+
+# hybris: additional configs for systemd-nspawn and so on
+CONFIG_BRIDGE_NETFILTER=y
+CONFIG_NF_NAT_IPV6=y
+CONFIG_IP6_NF_TARGET_MASQUERADE=y
+CONFIG_NETFILTER_XT_TARGET_CHECKSUM=y
+CONFIG_UNIX_DIAG=y
+CONFIG_PACKET_DIAG=y
+CONFIG_NETLINK_DIAG=y
+CONFIG_DEVPTS_MULTIPLE_INSTANCES=y
+CONFIG_USER_NS=y
+CONFIG_CGROUP_NS=y
+CONFIG_MACVLAN=y
+CONFIG_VLAN_8021Q=y
+CONFIG_BLOCK=y
+CONFIG_SQUASHFS=y
+CONFIG_SQUASHFS_LZ4=y
+CONFIG_SQUASHFS_XATTR=y
+
+# hybris: additional filesystems which are useful
+CONFIG_BTRFS_FS=y
+CONFIG_BLK_DEV_NBD=y
+CONFIG_XFS_FS=y
+CONFIG_ISO9660_FS=y
+CONFIG_NFS_FS=y
+CONFIG_NFS_V3=y
+CONFIG_NFS_V3_ACL=y
+CONFIG_NFS_V4=y
+CONFIG_NFS_V4_1=y
+CONFIG_NFS_USE_KERNEL_DNS=y
+CONFIG_LOCKD=y
+CONFIG_LOCKD_V4=y
+CONFIG_NFS_ACL_SUPPORT=y
+CONFIG_NFS_COMMON=y
+CONFIG_SUNRPC=y
+CONFIG_SUNRPC_GSS=y
+CONFIG_CIFS=y
+
+# hybris bluetooth
+CONFIG_BT_HCIVHCI=y
+CONFIG_BT_HIDP=y
+
+# hybris binder interfaces
+CONFIG_ANDROID_BINDER_DEVICES="binder,vndbinder,hwbinder,puddlejumper,vndpuddlejumper,hwpuddlejumper"
+CONFIG_CGROUP_SCHEDTUNE=n
+
+# hybris: usb networking
+CONFIG_USB_CONFIGFS_RMNET_BAM=y
+
+CONFIG_PM_AUTOSLEEP=y
-- 
2.39.2

